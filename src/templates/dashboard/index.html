{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">游닍 Total de Productos</h5>
                    <p class="card-text display-4">{{ total_products }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card text-white bg-danger shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">游뚿 Stock Cr칤tico</h5>
                    <p class="card-text display-4">{{ critical_stock }}</p>
                </div>
            </div>
        </div>
    </div>

    <h2 class="mt-4">Productos con Stock Cr칤tico</h2>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>C칩digo</th>
                    <th>Descripci칩n</th>
                    <th>Stock Actual</th>
                    <th>Stock M칤nimo</th>
                    <th>Diferencia</th>
                    <th>Acci칩n</th>
                </tr>
            </thead>
            <tbody>
                {% for product in low_stock_products %}
                <tr>
                    <td>{{ product.code }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ product.current_stock }}</td>
                    <td>{{ product.min_stock }}</td>
                    <td>{{ product.difference }}</td>
                    <td>
                        <a href="{% url 'inventory:request' product.pk %}" class="btn btn-sm btn-outline-danger">
                            Solicitar
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center">No hay productos con stock cr칤tico. 춰Todo en orden!</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h2 class="mt-4">游늵 Movimientos de Hoy</h2>
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">游닌 Entradas</h5>
                    <p class="card-text display-4">{{ today_entries }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">游닋 Salidas</h5>
                    <p class="card-text display-4">{{ today_exits }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}